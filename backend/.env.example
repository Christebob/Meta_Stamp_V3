# =============================================================================
# META-STAMP V3 Backend Environment Configuration
# =============================================================================
#
# This file serves as a template for environment variable configuration.
# Copy this file to .env and update with your actual values:
#   cp .env.example .env
#
# SECURITY WARNING:
# - NEVER commit your actual .env file to version control
# - All secrets should be changed for production deployments
# - Use strong, randomly generated keys for SECRET_KEY and passwords
#
# =============================================================================


# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
# Core application configuration for META-STAMP V3 backend service

# Application name used in logging and identification
APP_NAME=META-STAMP-V3

# Environment mode: development, staging, or production
# Controls debug features, logging verbosity, and security settings
APP_ENV=development

# Enable debug mode for detailed error messages and stack traces
# WARNING: Set to false in production to prevent information disclosure
DEBUG=true

# Logging level: debug, info, warning, error, critical
# Recommended: debug for development, info for production
LOG_LEVEL=info

# Secret key for JWT token signing and cryptographic operations
# CRITICAL: Generate a strong random key for production (min 32 characters)
# Example generation: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=your-secret-key-here-change-in-production


# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
# HTTP server and network binding settings

# Host address to bind the server
# Use 0.0.0.0 to accept connections from all network interfaces
HOST=0.0.0.0

# Port number for the HTTP server
# Default: 8000 for development
PORT=8000

# CORS allowed origins (comma-separated list)
# Add your frontend URL(s) to enable cross-origin requests
# Example: http://localhost:3000,https://app.metastamp.com
CORS_ORIGINS=http://localhost:3000,http://localhost:80


# =============================================================================
# MONGODB CONFIGURATION
# =============================================================================
# MongoDB database connection and pooling settings

# MongoDB connection URI
# Format: mongodb://username:password@host:port/
# For replica sets: mongodb://user:pass@host1:27017,host2:27017/?replicaSet=rs0
# Docker Compose default: mongodb://admin:password@mongodb:27017/
MONGODB_URI=mongodb://admin:password@mongodb:27017/

# Database name for META-STAMP application data
# Contains collections: assets, users, fingerprints, wallets, analytics
MONGODB_DB_NAME=metastamp

# Minimum number of connections in the connection pool
# Recommended: 10 for development, higher for production based on load
MONGODB_MIN_POOL_SIZE=10

# Maximum number of connections in the connection pool
# Adjust based on expected concurrent users and available database connections
MONGODB_MAX_POOL_SIZE=100


# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
# Redis cache and session storage settings

# Redis connection URL
# Format: redis://[:password@]host:port/database_number
# Docker Compose default: redis://redis:6379/0
REDIS_URL=redis://redis:6379/0

# Default cache TTL (Time To Live) in seconds
# Used for general caching when no specific TTL is provided
# Default: 300 seconds (5 minutes)
REDIS_CACHE_TTL_SECONDS=300


# =============================================================================
# S3/MINIO STORAGE CONFIGURATION
# =============================================================================
# S3-compatible object storage for asset files
# Supports MinIO for development and AWS S3 for production

# S3 API endpoint URL
# For MinIO (development): http://minio:9000
# For AWS S3 (production): https://s3.amazonaws.com or regional endpoint
# For other S3-compatible services: Use the provider's endpoint URL
S3_ENDPOINT_URL=http://minio:9000

# S3 access credentials
# For MinIO: Use minioadmin/minioadmin for development
# For AWS: Use IAM user credentials or assume role credentials
S3_ACCESS_KEY_ID=minioadmin
S3_SECRET_ACCESS_KEY=minioadmin

# S3 bucket name for storing uploaded assets
# Bucket will be created automatically if it doesn't exist (MinIO)
# For AWS S3: Bucket must be pre-created with appropriate permissions
S3_BUCKET_NAME=metastamp-assets

# AWS region for S3 operations
# Required for AWS S3, can be any value for MinIO
S3_REGION=us-east-1

# Presigned URL expiration time in seconds
# Controls how long upload/download URLs remain valid
# Default: 900 seconds (15 minutes) - recommended for security
PRESIGNED_URL_EXPIRATION_SECONDS=900


# =============================================================================
# AUTH0 CONFIGURATION
# =============================================================================
# Auth0 authentication integration settings
# If Auth0 is not configured, the system automatically falls back to local JWT
# authentication using HS256 algorithm with SECRET_KEY

# Auth0 tenant domain
# Found in Auth0 Dashboard > Applications > Settings
# Example: your-tenant.auth0.com
AUTH0_DOMAIN=your-tenant.auth0.com

# API audience/identifier for Auth0 API authorization
# Configure in Auth0 Dashboard > APIs
AUTH0_API_AUDIENCE=https://api.metastamp.com

# Auth0 application client ID
# Found in Auth0 Dashboard > Applications > Settings
AUTH0_CLIENT_ID=your-client-id

# Auth0 application client secret
# SECURITY: Keep this secret and never expose in frontend code
AUTH0_CLIENT_SECRET=your-client-secret

# JWT signing algorithm
# For Auth0: RS256 (RSA signature with SHA-256)
# For local fallback: HS256 (HMAC with SHA-256)
JWT_ALGORITHM=HS256

# JWT token expiration time in hours
# Default: 24 hours for local JWT fallback
# Auth0 token expiration is configured in Auth0 Dashboard
JWT_EXPIRATION_HOURS=24


# =============================================================================
# LANGCHAIN AI PROVIDER CONFIGURATION
# =============================================================================
# Multi-provider AI assistant configuration using LangChain
# At least one AI provider API key is required for AI assistant functionality
# System supports hot-switching between providers via configuration

# OpenAI API key for GPT-4/GPT-5 models
# Obtain from: https://platform.openai.com/api-keys
# Format: sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
OPENAI_API_KEY=sk-your-openai-key

# Anthropic API key for Claude models
# Obtain from: https://console.anthropic.com/
# Format: sk-ant-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
ANTHROPIC_API_KEY=sk-ant-your-anthropic-key

# Google API key for Gemini models
# Obtain from: https://makersuite.google.com/app/apikey
# Or use Google Cloud AI Platform credentials
GOOGLE_API_KEY=your-google-api-key

# Default AI provider when not specified in request
# Options: openai, anthropic, google
# Fallback: local (if no provider keys are configured)
DEFAULT_AI_PROVIDER=openai

# Default AI model for the selected provider
# OpenAI options: gpt-4, gpt-4-turbo, gpt-3.5-turbo
# Anthropic options: claude-3-5-sonnet, claude-3-opus, claude-3-haiku
# Google options: gemini-2.0-flash, gemini-1.5-pro
DEFAULT_AI_MODEL=gpt-4


# =============================================================================
# FILE UPLOAD SETTINGS
# =============================================================================
# Configuration for file upload validation and routing

# Maximum allowed file size for uploads in megabytes
# Files exceeding this limit will be rejected with 413 error
# CRITICAL: This is a hard security limit - do not exceed 500MB
MAX_UPLOAD_SIZE_MB=500

# Threshold for switching between direct and presigned URL upload
# Files smaller than this threshold use direct upload via FastAPI
# Files larger use S3 presigned URL for client-to-S3 direct transfer
# Default: 10MB - balances server load and upload efficiency
DIRECT_UPLOAD_THRESHOLD_MB=10

# Allowed file extensions for upload (comma-separated, include dots)
# SECURITY: ZIP, RAR, 7Z, EXE, BIN, SH, APP, MSI, ISO, DMG are FORBIDDEN
# Supported types:
#   Text: .txt, .md, .pdf
#   Images: .png, .jpg, .jpeg, .webp
#   Audio: .mp3, .wav, .aac
#   Video: .mp4, .mov, .avi
ALLOWED_FILE_EXTENSIONS=.txt,.md,.pdf,.png,.jpg,.jpeg,.webp,.mp3,.wav,.aac,.mp4,.mov,.avi


# =============================================================================
# FINGERPRINTING SETTINGS
# =============================================================================
# Multi-modal asset fingerprinting configuration

# Enable/disable fingerprinting on asset upload
# When disabled, fingerprints can still be generated on-demand via API
ENABLE_FINGERPRINTING=true

# Cache TTL for fingerprint data in seconds
# Fingerprints are cached in Redis for faster retrieval
# Default: 3600 seconds (1 hour)
FINGERPRINT_CACHE_TTL_SECONDS=3600


# =============================================================================
# AI TOUCH VALUE™ SETTINGS
# =============================================================================
# Configuration for AI Touch Value™ calculation engine
# Formula: AI Touch Value™ = ModelEarnings × (TrainingContributionScore/100) 
#                            × (UsageExposureScore/100) × EquityFactor

# Equity factor (fixed multiplier representing creator compensation percentage)
# Default: 0.25 (25%) - industry standard creator compensation rate
# This value is applied to all AI Touch Value™ calculations
EQUITY_FACTOR=0.25


# =============================================================================
# PHASE 2 PLACEHOLDER SETTINGS (Reserved for Future Use)
# =============================================================================
# These settings are reserved for Phase 2 AI training detection features
# DO NOT MODIFY - These will be activated in future releases

# Enable AI training detection engine (Phase 2)
# ENABLE_TRAINING_DETECTION=false

# Dataset comparison threshold for similarity matching (Phase 2)
# SIMILARITY_THRESHOLD=0.85

# Embedding drift detection sensitivity (Phase 2)
# DRIFT_SENSITIVITY=medium

# Legal export format (Phase 2)
# LEGAL_EXPORT_FORMAT=pdf
